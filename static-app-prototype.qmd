---
title: "Static App Prototype"
author: "Andy Powers"
format: pdf
---

# Introduction

## Static App Prototype
This Quarto R project is the static, phase-I build of my app for exploring mobile device data. After completion in static form, I will iteratively convert each element to R Shiny dynamic format and add a flexible and friendly interface.

## Static App Components
1. Mobile device dataset.
2. Contingency tables.
3. Numerical summaries.
4. Plots.

# Components

## Libraries
```{r}
library(tidyverse)
library(utils)
library(readr)
library(readxl)
```

## Dataset

This app will explore mobile device usage data from [Kaggle](https://www.kaggle.com/datasets/valakhorasani/mobile-device-usage-and-user-behavior-dataset). Because Kaggle is difficult to query, I've saved the file locally and included it in the same directory as the Quarto and app files.

```{r}
data <- readr::read_csv("user_behavior_dataset.csv",col_names = TRUE)
```

The data imports as appropriate types, but I don't like the column labels. I'm abbreviating and removing spaces.
```{r}
names(data) <- c(
  "ID",
  "Model",
  "OS",
  "AppUsageTime_min",
  "ScreenTime_hr",
  "BatteryUsage_mAh",
  "Apps",
  "DataUsage_MB",
  "Age",
  "Gender",
  "Class"
)
```

## Contingency Tables
A starting place for analysis, let's look at some one- and two-way contingency tables.
```{r}
data |>
  group_by(Model) |>
  summarize(n())
```

So, our dataset is a fairly even mix of samples across device models.

```{r}
data |> 
  group_by(OS) |>
  summarize(count=n())
```

This is reasonable, as Apple is a walled garden so all non-iPhone devices will be Android OS.

I'd like to compare with ages and other numerical fields, but they are too granular. I need to create some groups. Then keeping only the columns that I want.

```{r}
#ages binned by 5, from min 18 through max 59
data$AgeGroup <- cut(
  data$Age,
  breaks=seq(15,60,by=5)
)

#app usage converted to minutes
data$AppUsageTime_hr <- round(data$AppUsageTime_min/60,digits=1)

#factor all character strings
data$Gender <- factor(data$Gender)
data$Model <- factor(data$Model)
data$OS <- factor(data$OS)

#only keep the columns that I want
data <- 
  data |> 
  select(
    ID,
    Model,
    OS,
    Gender,
    AgeGroup,
    Apps,
    ScreenTime_hr,
    AppUsageTime_hr,
    DataUsage_MB,
    BatteryUsage_mAh
  )
```

